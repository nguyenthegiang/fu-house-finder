<div class="row add-button">
  <!-- Search bar -->
  <input type="text" placeholder="Search..">
  <!-- Add room button -->
  <button id="addRoom">+ Thêm phòng</button>
</div>

<div class="row filter">
  <!-- Loại phòng -->
  <div class="dropdown">
    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      Loại phòng
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <ul *ngFor="let dataItem of roomTypes" style="padding: 0 10px;">
        <li>
          <input type="checkbox" value="{{dataItem.roomTypeName}}">
          {{dataItem.roomTypeName}}
        </li>
      </ul>
    </div>
  </div>

  <!-- Tầng -->
  <div class="dropdown">
    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      Tầng
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <ul>
        <li>1</li>
      </ul>
    </div>
  </div>

  <!-- Tình trạng -->
  <div class="dropdown">
    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      Tình trạng
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <ul *ngFor="let dataItem of statuses" style="padding: 0 10px; width: fit-content;">
        <li>
          <input type="checkbox" value="{{dataItem.statusName}}">
          <span *ngIf="dataItem.statusName === 'Available'">Trống</span>
          <span *ngIf="dataItem.statusName === 'Occupied'">Đã cho thuê</span>
          <span *ngIf="dataItem.statusName === 'Disabled'">Không dùng được</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- Button -->
  <button id="filter-button">Lọc</button>
</div>

<!-- List of rooms  -->
<div class="row room-table">
  <h3>Danh sách phòng trống</h3>

  <div style="display: flex; justify-content: space-between;">
    <!-- Total money for not rented rooms -->
    <div style="color: red; font-weight: 500; font-size: 20px; padding: 20px 0;">
      <span>Tổng tiền phòng chưa cho thuê: </span>
      <span>{{ moneyForNotRentedRooms | currency:'VND':'symbol':'3.0' }}</span>
    </div>
    <!-- Note -->
    <div style="display: flex; justify-content: flex-end;">
      <i class="fa-solid fa-user" style="margin: 5px 5px;"></i>
      <span>Đã ở</span>
      <i class="fa-regular fa-user" style="margin: 5px 5px;"></i>
      <span>Chưa ở</span>
    </div>
  </div>

  <table>
    <thead>
      <th>Tên phòng</th>
      <th>Giá phòng</th>
      <th>Diện tích</th>
      <th>Tủ lạnh</th>
      <th>Bếp</th>
      <th>Máy giặt</th>
      <th>Bàn học</th>
      <th>Chung chủ</th>
      <th>Giường</th>
      <th>Vệ sinh khép kín</th>
      <th>Số người ở</th>
      <th>Trạng thái</th>
      <th>Thao tác</th>
    </thead>
    <tbody>
      <tr *ngFor="let dataItem of rooms">
        <!-- Room name -->
        <td>{{dataItem.roomName}}</td>

        <!-- Price -->
        <td>{{dataItem.pricePerMonth|currency:'VND':'symbol':'3.0'}}</td>

        <!-- Area -->
        <td style="text-align: center;">{{dataItem.areaByMeters}} m<sup>2</sup></td>

        <!-- Fridge -->
        <td *ngIf="dataItem.fridge === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.fridge === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Kitchen -->
        <td *ngIf="dataItem.kitchen === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.kitchen === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Washing Machine -->
        <td *ngIf="dataItem.washingMachine === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.washingMachine === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Desk -->
        <td *ngIf="dataItem.desk === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.desk === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Live With Host -->
        <td *ngIf="dataItem.noLiveWithHost === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.noLiveWithHost === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Bed -->
        <td *ngIf="dataItem.bed === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.bed === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Closed Toilet -->
        <td *ngIf="dataItem.closedToilet === false" style="text-align: center;">
          <img src="../../../assets/image/cancel.png">
        </td>
        <td *ngIf="dataItem.closedToilet === true" style="text-align: center;">
          <img src="../../../assets/image/tick.png">
        </td>

        <!-- Amount of people -->
        <td style="display: flex; height:100%;">
          <ul id="list-people">
            <li *ngFor='let in of peopleCounter(dataItem.currentAmountOfPeople); let i = index'>
              <i class="fa-solid fa-user"></i>
            </li>
            <li
              *ngFor='let in of peopleCounter(dataItem.maxAmountOfPeople - dataItem.currentAmountOfPeople); let i = index'>
              <i class="fa-regular fa-user"></i>
            </li>
          </ul>
        </td>

        <!-- Room status -->
        <td>
          <!-- <label class="switch">
            <input *ngIf="dataItem.status.statusName === 'Occupied' || dataItem.status.statusName === 'Disabled'"
              type="checkbox">
            <input *ngIf="dataItem.status.statusName === 'Available'" type="checkbox" checked>
            <span class="slider round"></span>
          </label>
          <br>
          <span *ngIf="dataItem.status.statusName === 'Available'">Còn trống</span>
          <span *ngIf="dataItem.status.statusName === 'Occupied'">Đã thuê</span>
          <span *ngIf="dataItem.status.statusName === 'Disabled'">Không dùng được</span> -->
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
              [checked]="dataItem.status.statusName === 'Available'"
              [disabled]="dataItem.status.statusName === 'Disabled'">
            <label class="form-check-label" for="flexSwitchCheckChecked"><span
                *ngIf="dataItem.status.statusName === 'Available'">Còn trống</span>
              <span *ngIf="dataItem.status.statusName === 'Occupied'">Đã thuê</span>
              <span *ngIf="dataItem.status.statusName === 'Disabled'">Không dùng được</span></label>
          </div>
        </td>


        <td>
          <!-- Update button -->
          <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#updateModal"
            data-bs-whatever="@getbootstrap" (click)="editRoom(dataItem.roomId)">Chỉnh sửa</button>

          <!-- Delete button -->
          <button type=" button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal"
            data-bs-whatever="@getbootstrap" (click)="editRoom(dataItem.roomId)">Xóa</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-update-room [roomId]="updateRoomId"></app-update-room>

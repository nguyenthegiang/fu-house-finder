<!-- Display Loading Spinner when House Detail is not yet loaded -->
<div class="container-fluid" *ngIf="houseDetail === undefined || landlordDetail === undefined">
  <div class="spinner-border text-danger" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<!-- Only Display when House Detail is loaded -->
<div class="container-fluid my-5 d-flex justify-content-center" *ngIf="houseDetail && landlordDetail">
  <div class="row w-100 d-flex justify-content-around">
    <div class="col-12 col-md-7">
      <!-- House images -->
      <img id="houseImage" src="../../assets/image/HouseImage.jpg" alt="..." width="100%" class="rounded">

      <!-- House detail information-->
      <div class="house-information border border-secondary rounded mt-5 p-2">
        <h3 class="text-center">{{houseDetail!.houseName}}</h3>
        <span><b>Giá điện: </b> {{houseDetail!.powerPrice}}/kWh</span>
        <br>
        <span><b>Giá nước: </b> {{houseDetail!.waterPrice}}/m3</span>
        <br>
        <span><b>Địa chỉ: </b>{{houseDetail!.address!.addresses}}</span>
        <br>
        <span><b>Thông tin khác: </b>{{houseDetail!.information}}</span>
      </div>

      <!-- Google map -->
      <div>
        <iframe id="googleMap" class="w-100 h-25 my-5 border border-secondary rounded"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.995814709238!2d105.51943301488284!3d20.992804886017904!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31345bae7a5f0d39%3A0xec177bce6cdc3a46!2zSG_DoCBM4bqhYyBBcGFydG1lbnQ!5e0!3m2!1svi!2s!4v1665457315377!5m2!1svi!2s"
          allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>

    <div class="col-12 col-md-4">
      <!-- Landlord information -->
      <div class="landlordInformation border border-secondary rounded p-2">
        <h3 class="text-center">Thông tin chủ trọ</h3>
        <!-- Landlord's avatar -->
        <div class="d-flex justify-content-center align-items-center my-3">
          <img src="../../assets/image/LandlordAvatar.jpg" alt="Landlord's avatar" width="250px" height="200px" class="rounded">
        </div>
        <!-- Other information -->
        <span>
          <b>Họ và tên: </b>
          {{landlordDetail.displayName}}
        </span>
        <br>
        <span>
          <b>Facebook: </b>
          <a href="{{landlordDetail!.facebookUrl}}">{{landlordDetail!.facebookUrl}}</a>
        </span>
        <br>
        <span>
          <b>Số điện thoại: </b>
          {{landlordDetail!.phoneNumber}}
        </span>
        <br>
        <span>
          <b>Địa chỉ: </b>
          {{landlordDetail!.address.addresses}}
        </span>
      </div>

      <!-- Rate and comment -->
      <div class="my-5 border border-secondary rounded p-2">
        <h3 class="text-center">Người dùng đánh giá</h3>
        Bình luận:
        <div class="bg-light border border-secondary rounded mb-2 p-2">
          Nguyễn Văn A: Đẹp, gần trường (<i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>)
          <br> <i class="fa-solid fa-arrow-right"></i> Chủ trọ trả lời: Cảm ơn bạn nhiều
        </div>
        Viết bình luận:
        <input type="text" class="form-control" aria-label="Username" aria-describedby="basic-addon1">
        <div class="my-2 d-flex">
          Đánh giá:
          <div class="ms-2">
            <i class="star fa-regular fa-star"></i>
            <i class="star fa-regular fa-star"></i>
            <i class="star fa-regular fa-star"></i>
            <i class="star fa-regular fa-star"></i>
            <i class="star fa-regular fa-star"></i>
          </div>
        </div>

        <button type="button" class="btn btn-secondary w-100">Đăng</button>
      </div>
    </div>

    <!-- List available rooms -->
    <div class="availableRooms col-12">
      <h3 class="text-center">Danh sách phòng trống</h3>
      <div class="row">
        <!-- Room Item -->
        <!-- Link to Room Detail -->
        <div class="col-12 col-lg-4 col-sm-6 mt-3" *ngFor="let dataItem of availableRooms">
          <div class="card rounded roomCardItem h-100">
            <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
              </div>
              <div class="carousel-inner rounded">
                <div class="carousel-item active">
                  <img src="../assets/image/Room/{{dataItem.imagesOfRooms[0].imageLink}}" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img src="../assets/image/Room/{{dataItem.imagesOfRooms[1].imageLink}}" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img src="../assets/image/Room/{{dataItem.imagesOfRooms[2].imageLink}}" class="d-block w-100" alt="...">
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
            <div class="card-body bg-secondary text-white rounded-bottom" style="background-color: #3E4F3C!;">
              <h5 class="card-title text-center font-weight-bold">{{dataItem.roomName}}</h5>
              <!-- View -->
              <div style="text-align: right; font-size: 12px;">
                <i class="fa-solid fa-eye" style="margin-right: 10px;"></i>
                <span>3,459</span>
              </div>
              <!-- Price with VND format -->
              <div class="card-text"><i class="fa-solid fa-tag me-2"></i>{{dataItem.pricePerMonth |
                currency:'VND':'symbol':'3.0'}}</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-location-dot me-2"></i>{{dataItem.areaByMeters}}m2</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-circle-info me-2"></i>{{dataItem.information}}</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-user me-2"></i>Số người tối đa: {{dataItem.maxAmountOfPeople}} người</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-user me-2"></i>Số người đang ở: {{dataItem.currentAmountOfPeople}} người</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-house me-2"></i>Tòa nhà: {{dataItem.buildingNumber}} - Tầng: {{dataItem.floorNumber}}</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-door-closed me-2"></i>Loại phòng: {{dataItem.roomType.roomTypeName}}</div>
              <div class="card-text text-truncate" style="max-width: 100%;"><i
                  class="fa-solid fa-calendar-days me-2"></i>Ngày tạo: {{dataItem.createdDate | date}}</div>
              <button type="button" class="btn btn-light w-100 mt-4" (click)="GoToRoomDetail(dataItem.roomId)">Xem chi tiết</button>
            </div>
          </div>
        </div>
        <!-- End Room Item -->
      </div>
      <!-- End List of Rooms -->

      <!-- Paging -->
      <!-- <div class="d-flex justify-content-center align-items-center mt-5">
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link text-dark" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item"><a class="page-link text-dark" href="#">1</a></li>
            <li class="page-item"><a class="page-link text-dark" href="#">2</a></li>
            <li class="page-item"><a class="page-link text-dark" href="#">3</a></li>
            <li class="page-item">
              <a class="page-link text-dark" href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
          </ul>
        </nav>
      </div> -->
      <!-- End Paging -->
    </div>
  </div>

  <button type="button" class="floating-btn" data-toggle="modal" data-target="#exampleModal"
    data-whatever="@getbootstrap">
    <i class="fa-solid fa-flag"></i>
  </button>
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #FF6F3D;">
          <h5 class="modal-title text-white" id="exampleModalLabel">Báo cáo nhà trọ</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Lý do:</label>
              <textarea class="form-control" id="message-text"
                #inputReportContent></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer d-flex justify-content-center text-white" style="border-color: none;">
          <button (click)="sendReport(inputReportContent.value)" type="button" class="btn text-white"
            style="background-color: #FF6F3D;" data-dismiss="modal">Báo
            cáo</button>
        </div>
      </div>
    </div>
  </div>
</div>
